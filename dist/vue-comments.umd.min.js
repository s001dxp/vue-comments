(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vue-comments"]=t(require("vue")):e["vue-comments"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="fb15")}({"04f8":function(e,t,o){"use strict";var n=o("1212"),s=o("d039"),i=o("cfe9"),r=i.String;e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol("symbol detection");return!r(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},"06cf":function(e,t,o){"use strict";var n=o("83ab"),s=o("c65b"),i=o("d1e7"),r=o("5c6c"),c=o("fc6a"),a=o("a04b"),m=o("1a2d"),l=o("0cfb"),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=c(e),t=a(t),l)try{return u(e,t)}catch(o){}if(m(e,t))return r(!s(i.f,e,t),e[t])}},"07fa":function(e,t,o){"use strict";var n=o("50c4");e.exports=function(e){return n(e.length)}},"0928":function(e,t,o){e.exports=o.p+"img/icon-file.1f89d962.svg"},"0cfb":function(e,t,o){"use strict";var n=o("83ab"),s=o("d039"),i=o("cc12");e.exports=!n&&!s((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"0d51":function(e,t,o){"use strict";var n=String;e.exports=function(e){try{return n(e)}catch(t){return"Object"}}},"113c":function(e,t,o){"use strict";o("907b")},1212:function(e,t,o){"use strict";var n,s,i=o("cfe9"),r=o("b5db"),c=i.process,a=i.Deno,m=c&&c.versions||a&&a.version,l=m&&m.v8;l&&(n=l.split("."),s=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!s&&r&&(n=r.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=r.match(/Chrome\/(\d+)/),n&&(s=+n[1]))),e.exports=s},"13d2":function(e,t,o){"use strict";var n=o("e330"),s=o("d039"),i=o("1626"),r=o("1a2d"),c=o("83ab"),a=o("5e77").CONFIGURABLE,m=o("8925"),l=o("69f3"),u=l.enforce,d=l.get,p=String,f=Object.defineProperty,h=n("".slice),b=n("".replace),v=n([].join),g=c&&!s((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),j=e.exports=function(e,t,o){"Symbol("===h(p(t),0,7)&&(t="["+b(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),o&&o.getter&&(t="get "+t),o&&o.setter&&(t="set "+t),(!r(e,"name")||a&&e.name!==t)&&(c?f(e,"name",{value:t,configurable:!0}):e.name=t),g&&o&&r(o,"arity")&&e.length!==o.arity&&f(e,"length",{value:o.arity});try{o&&r(o,"constructor")&&o.constructor?c&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(s){}var n=u(e);return r(n,"source")||(n.source=v(y,"string"==typeof t?t:"")),e};Function.prototype.toString=j((function(){return i(this)&&d(this).source||m(this)}),"toString")},"14d9":function(e,t,o){"use strict";var n=o("23e7"),s=o("7b0b"),i=o("07fa"),r=o("3a34"),c=o("3511"),a=o("d039"),m=a((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},u=m||!l();n({target:"Array",proto:!0,arity:1,forced:u},{push:function(e){var t=s(this),o=i(t),n=arguments.length;c(o+n);for(var a=0;a<n;a++)t[o]=arguments[a],o++;return r(t,o),o}})},1626:function(e,t,o){"use strict";var n="object"==typeof document&&document.all;e.exports="undefined"==typeof n&&void 0!==n?function(e){return"function"==typeof e||e===n}:function(e){return"function"==typeof e}},"19aa":function(e,t,o){"use strict";var n=o("3a9b"),s=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new s("Incorrect invocation")}},"1a2d":function(e,t,o){"use strict";var n=o("e330"),s=o("7b0b"),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(s(e),t)}},"1be4":function(e,t,o){"use strict";var n=o("d066");e.exports=n("document","documentElement")},"1d80":function(e,t,o){"use strict";var n=o("7234"),s=TypeError;e.exports=function(e){if(n(e))throw new s("Can't call method on "+e);return e}},"23cb":function(e,t,o){"use strict";var n=o("5926"),s=Math.max,i=Math.min;e.exports=function(e,t){var o=n(e);return o<0?s(o+t,0):i(o,t)}},"23e7":function(e,t,o){"use strict";var n=o("cfe9"),s=o("06cf").f,i=o("9112"),r=o("cb2d"),c=o("6374"),a=o("e893"),m=o("94ca");e.exports=function(e,t){var o,l,u,d,p,f,h=e.target,b=e.global,v=e.stat;if(l=b?n:v?n[h]||c(h,{}):n[h]&&n[h].prototype,l)for(u in t){if(p=t[u],e.dontCallGetSet?(f=s(l,u),d=f&&f.value):d=l[u],o=m(b?u:h+(v?".":"#")+u,e.forced),!o&&void 0!==d){if(typeof p==typeof d)continue;a(p,d)}(e.sham||d&&d.sham)&&i(p,"sham",!0),r(l,u,p,e)}}},"241c":function(e,t,o){"use strict";var n=o("ca84"),s=o("7839"),i=s.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},"2a62":function(e,t,o){"use strict";var n=o("c65b"),s=o("825a"),i=o("dc4a");e.exports=function(e,t,o){var r,c;s(e);try{if(r=i(e,"return"),!r){if("throw"===t)throw o;return o}r=n(r,e)}catch(a){c=!0,r=a}if("throw"===t)throw o;if(c)throw r;return s(r),o}},"2baa":function(e,t,o){"use strict";e.exports=function(e,t){var o="function"==typeof Iterator&&Iterator.prototype[e];if(o)try{o.call({next:null},t).next()}catch(n){return!0}}},"2d30":function(e,t){function o(){return!("undefined"===typeof window||!("ontouchstart"in window||window.DocumentTouch&&"undefined"!==typeof document&&document instanceof window.DocumentTouch))||!("undefined"===typeof navigator||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o,e.exports=t["default"]},3511:function(e,t,o){"use strict";var n=TypeError,s=9007199254740991;e.exports=function(e){if(e>s)throw n("Maximum allowed index exceeded");return e}},"37e8":function(e,t,o){"use strict";var n=o("83ab"),s=o("aed9"),i=o("9bf2"),r=o("825a"),c=o("fc6a"),a=o("df75");t.f=n&&!s?Object.defineProperties:function(e,t){r(e);var o,n=c(t),s=a(t),m=s.length,l=0;while(m>l)i.f(e,o=s[l++],n[o]);return e}},"3a34":function(e,t,o){"use strict";var n=o("83ab"),s=o("e8b5"),i=TypeError,r=Object.getOwnPropertyDescriptor,c=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=c?function(e,t){if(s(e)&&!r(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},"3a9b":function(e,t,o){"use strict";var n=o("e330");e.exports=n({}.isPrototypeOf)},"3f9a":function(e,t,o){},"40d5":function(e,t,o){"use strict";var n=o("d039");e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"44ad":function(e,t,o){"use strict";var n=o("e330"),s=o("d039"),i=o("c6b6"),r=Object,c=n("".split);e.exports=s((function(){return!r("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?c(e,""):r(e)}:r},"44dc":function(e,t){e.exports={link:/(https?:\/\/[^\s]+)/g}},"46c4":function(e,t,o){"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},4754:function(e,t,o){"use strict";e.exports=function(e,t){return{value:e,done:t}}},"485a":function(e,t,o){"use strict";var n=o("c65b"),s=o("1626"),i=o("861d"),r=TypeError;e.exports=function(e,t){var o,c;if("string"===t&&s(o=e.toString)&&!i(c=n(o,e)))return c;if(s(o=e.valueOf)&&!i(c=n(o,e)))return c;if("string"!==t&&s(o=e.toString)&&!i(c=n(o,e)))return c;throw new r("Can't convert object to primitive value")}},"4d64":function(e,t,o){"use strict";var n=o("fc6a"),s=o("23cb"),i=o("07fa"),r=function(e){return function(t,o,r){var c=n(t),a=i(c);if(0===a)return!e&&-1;var m,l=s(r,a);if(e&&o!==o){while(a>l)if(m=c[l++],m!==m)return!0}else for(;a>l;l++)if((e||l in c)&&c[l]===o)return e||l||0;return!e&&-1}};e.exports={includes:r(!0),indexOf:r(!1)}},"50c4":function(e,t,o){"use strict";var n=o("5926"),s=Math.min;e.exports=function(e){var t=n(e);return t>0?s(t,9007199254740991):0}},5692:function(e,t,o){"use strict";var n=o("c6cd");e.exports=function(e,t){return n[e]||(n[e]=t||{})}},"56ef":function(e,t,o){"use strict";var n=o("d066"),s=o("e330"),i=o("241c"),r=o("7418"),c=o("825a"),a=s([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(c(e)),o=r.f;return o?a(t,o(e)):t}},5926:function(e,t,o){"use strict";var n=o("b42e");e.exports=function(e){var t=+e;return t!==t||0===t?0:n(t)}},"59ad":function(e,t,o){"use strict";o("a61e")},"59ed":function(e,t,o){"use strict";var n=o("1626"),s=o("0d51"),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(s(e)+" is not a function")}},"5c6c":function(e,t,o){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5e77":function(e,t,o){"use strict";var n=o("83ab"),s=o("1a2d"),i=Function.prototype,r=n&&Object.getOwnPropertyDescriptor,c=s(i,"name"),a=c&&"something"===function(){}.name,m=c&&(!n||n&&r(i,"name").configurable);e.exports={EXISTS:c,PROPER:a,CONFIGURABLE:m}},6374:function(e,t,o){"use strict";var n=o("cfe9"),s=Object.defineProperty;e.exports=function(e,t){try{s(n,e,{value:t,configurable:!0,writable:!0})}catch(o){n[e]=t}return t}},6964:function(e,t,o){"use strict";var n=o("cb2d");e.exports=function(e,t,o){for(var s in t)n(e,s,t[s],o);return e}},"69f3":function(e,t,o){"use strict";var n,s,i,r=o("cdce"),c=o("cfe9"),a=o("861d"),m=o("9112"),l=o("1a2d"),u=o("c6cd"),d=o("f772"),p=o("d012"),f="Object already initialized",h=c.TypeError,b=c.WeakMap,v=function(e){return i(e)?s(e):n(e,{})},g=function(e){return function(t){var o;if(!a(t)||(o=s(t)).type!==e)throw new h("Incompatible receiver, "+e+" required");return o}};if(r||u.state){var y=u.state||(u.state=new b);y.get=y.get,y.has=y.has,y.set=y.set,n=function(e,t){if(y.has(e))throw new h(f);return t.facade=e,y.set(e,t),t},s=function(e){return y.get(e)||{}},i=function(e){return y.has(e)}}else{var j=d("state");p[j]=!0,n=function(e,t){if(l(e,j))throw new h(f);return t.facade=e,m(e,j,t),t},s=function(e){return l(e,j)?e[j]:{}},i=function(e){return l(e,j)}}e.exports={set:n,get:s,has:i,enforce:v,getterFor:g}},"6b0d":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const o=e.__vccOpts||e;for(const[n,s]of t)o[n]=s;return o}},7234:function(e,t,o){"use strict";e.exports=function(e){return null===e||void 0===e}},7418:function(e,t,o){"use strict";t.f=Object.getOwnPropertySymbols},7839:function(e,t,o){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(e,t,o){"use strict";var n=o("1d80"),s=Object;e.exports=function(e){return s(n(e))}},"7c73":function(e,t,o){"use strict";var n,s=o("825a"),i=o("37e8"),r=o("7839"),c=o("d012"),a=o("1be4"),m=o("cc12"),l=o("f772"),u=">",d="<",p="prototype",f="script",h=l("IE_PROTO"),b=function(){},v=function(e){return d+f+u+e+d+"/"+f+u},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=m("iframe"),o="java"+f+":";return t.style.display="none",a.appendChild(t),t.src=String(o),e=t.contentWindow.document,e.open(),e.write(v("document.F=Object")),e.close(),e.F},j=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}j="undefined"!=typeof document?document.domain&&n?g(n):y():g(n);var e=r.length;while(e--)delete j[p][r[e]];return j()};c[h]=!0,e.exports=Object.create||function(e,t){var o;return null!==e?(b[p]=s(e),o=new b,b[p]=null,o[h]=e):o=j(),void 0===t?o:i.f(o,t)}},"7f0b":function(e,t,o){"use strict";o("3f9a")},"825a":function(e,t,o){"use strict";var n=o("861d"),s=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(s(e)+" is not an object")}},"83ab":function(e,t,o){"use strict";var n=o("d039");e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,o){"use strict";var n=o("83ab"),s=o("9bf2"),i=o("5c6c");e.exports=function(e,t,o){n?s.f(e,t,i(0,o)):e[t]=o}},"861d":function(e,t,o){"use strict";var n=o("1626");e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},8925:function(e,t,o){"use strict";var n=o("e330"),s=o("1626"),i=o("c6cd"),r=n(Function.toString);s(i.inspectSource)||(i.inspectSource=function(e){return r(e)}),e.exports=i.inspectSource},"8bbf":function(t,o){t.exports=e},"8d00":function(e,t){e.exports="data:image/png;base64,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"},"907b":function(e,t,o){},"90e3":function(e,t,o){"use strict";var n=o("e330"),s=0,i=Math.random(),r=n(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+r(++s+i,36)}},9112:function(e,t,o){"use strict";var n=o("83ab"),s=o("9bf2"),i=o("5c6c");e.exports=n?function(e,t,o){return s.f(e,t,i(1,o))}:function(e,t,o){return e[t]=o,e}},"94ca":function(e,t,o){"use strict";var n=o("d039"),s=o("1626"),i=/#|\.prototype\./,r=function(e,t){var o=a[c(e)];return o===l||o!==m&&(s(t)?n(t):!!t)},c=r.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=r.data={},m=r.NATIVE="N",l=r.POLYFILL="P";e.exports=r},"9bdd":function(e,t,o){"use strict";var n=o("825a"),s=o("2a62");e.exports=function(e,t,o,i){try{return i?t(n(o)[0],o[1]):t(o)}catch(r){s(e,"throw",r)}}},"9bf2":function(e,t,o){"use strict";var n=o("83ab"),s=o("0cfb"),i=o("aed9"),r=o("825a"),c=o("a04b"),a=TypeError,m=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u="enumerable",d="configurable",p="writable";t.f=n?i?function(e,t,o){if(r(e),t=c(t),r(o),"function"===typeof e&&"prototype"===t&&"value"in o&&p in o&&!o[p]){var n=l(e,t);n&&n[p]&&(e[t]=o.value,o={configurable:d in o?o[d]:n[d],enumerable:u in o?o[u]:n[u],writable:!1})}return m(e,t,o)}:m:function(e,t,o){if(r(e),t=c(t),r(o),s)try{return m(e,t,o)}catch(n){}if("get"in o||"set"in o)throw new a("Accessors not supported");return"value"in o&&(e[t]=o.value),e}},a04b:function(e,t,o){"use strict";var n=o("c04e"),s=o("d9b5");e.exports=function(e){var t=n(e,"string");return s(t)?t:t+""}},a5f4:function(e){e.exports=JSON.parse('{"gif":true,"jpeg":true,"jpg":true,"png":true,"webp":true,"svg":true}')},a61e:function(e,t,o){},ab43:function(e,t,o){"use strict";var n=o("23e7"),s=o("c65b"),i=o("59ed"),r=o("825a"),c=o("46c4"),a=o("c5cc"),m=o("9bdd"),l=o("2a62"),u=o("2baa"),d=o("f99f"),p=o("c430"),f=!p&&!u("map",(function(){})),h=!p&&!f&&d("map",TypeError),b=p||f||h,v=a((function(){var e=this.iterator,t=r(s(this.next,e)),o=this.done=!!t.done;if(!o)return m(e,this.mapper,[t.value,this.counter++],!0)}));n({target:"Iterator",proto:!0,real:!0,forced:b},{map:function(e){r(this);try{i(e)}catch(t){l(this,"throw",t)}return h?s(h,this,e):new v(c(this),{mapper:e})}})},ae93:function(e,t,o){"use strict";var n,s,i,r=o("d039"),c=o("1626"),a=o("861d"),m=o("7c73"),l=o("e163"),u=o("cb2d"),d=o("b622"),p=o("c430"),f=d("iterator"),h=!1;[].keys&&(i=[].keys(),"next"in i?(s=l(l(i)),s!==Object.prototype&&(n=s)):h=!0);var b=!a(n)||r((function(){var e={};return n[f].call(e)!==e}));b?n={}:p&&(n=m(n)),c(n[f])||u(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:h}},aed9:function(e,t,o){"use strict";var n=o("83ab"),s=o("d039");e.exports=n&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},b42e:function(e,t,o){"use strict";var n=Math.ceil,s=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?s:n)(t)}},b5db:function(e,t,o){"use strict";var n=o("cfe9"),s=n.navigator,i=s&&s.userAgent;e.exports=i?String(i):""},b622:function(e,t,o){"use strict";var n=o("cfe9"),s=o("5692"),i=o("1a2d"),r=o("90e3"),c=o("04f8"),a=o("fdbf"),m=n.Symbol,l=s("wks"),u=a?m["for"]||m:m&&m.withoutSetter||r;e.exports=function(e){return i(l,e)||(l[e]=c&&i(m,e)?m[e]:u("Symbol."+e)),l[e]}},b64e:function(e,t,o){"use strict";var n=o("2a62");e.exports=function(e,t,o){for(var s=e.length-1;s>=0;s--)if(void 0!==e[s])try{o=n(e[s].iterator,t,o)}catch(i){t="throw",o=i}if("throw"===t)throw o;return o}},c04e:function(e,t,o){"use strict";var n=o("c65b"),s=o("861d"),i=o("d9b5"),r=o("dc4a"),c=o("485a"),a=o("b622"),m=TypeError,l=a("toPrimitive");e.exports=function(e,t){if(!s(e)||i(e))return e;var o,a=r(e,l);if(a){if(void 0===t&&(t="default"),o=n(a,e,t),!s(o)||i(o))return o;throw new m("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},c430:function(e,t,o){"use strict";e.exports=!1},c5cc:function(e,t,o){"use strict";var n=o("c65b"),s=o("7c73"),i=o("9112"),r=o("6964"),c=o("b622"),a=o("69f3"),m=o("dc4a"),l=o("ae93").IteratorPrototype,u=o("4754"),d=o("2a62"),p=o("b64e"),f=c("toStringTag"),h="IteratorHelper",b="WrapForValidIterator",v="normal",g="throw",y=a.set,j=function(e){var t=a.getterFor(e?b:h);return r(s(l),{next:function(){var o=t(this);if(e)return o.nextHandler();if(o.done)return u(void 0,!0);try{var n=o.nextHandler();return o.returnHandlerResult?n:u(n,o.done)}catch(s){throw o.done=!0,s}},return:function(){var o=t(this),s=o.iterator;if(o.done=!0,e){var i=m(s,"return");return i?n(i,s):u(void 0,!0)}if(o.inner)try{d(o.inner.iterator,v)}catch(r){return d(s,g,r)}if(o.openIters)try{p(o.openIters,v)}catch(r){return d(s,g,r)}return s&&d(s,v),u(void 0,!0)}})},O=j(!0),w=j(!1);i(w,f,"Iterator Helper"),e.exports=function(e,t,o){var n=function(n,s){s?(s.iterator=n.iterator,s.next=n.next):s=n,s.type=t?b:h,s.returnHandlerResult=!!o,s.nextHandler=e,s.counter=0,s.done=!1,y(this,s)};return n.prototype=t?O:w,n}},c65b:function(e,t,o){"use strict";var n=o("40d5"),s=Function.prototype.call;e.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},c6b6:function(e,t,o){"use strict";var n=o("e330"),s=n({}.toString),i=n("".slice);e.exports=function(e){return i(s(e),8,-1)}},c6cd:function(e,t,o){"use strict";var n=o("c430"),s=o("cfe9"),i=o("6374"),r="__core-js_shared__",c=e.exports=s[r]||i(r,{});(c.versions||(c.versions=[])).push({version:"3.43.0",mode:n?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"})},c8ba:function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(n){"object"===typeof window&&(o=window)}e.exports=o},ca84:function(e,t,o){"use strict";var n=o("e330"),s=o("1a2d"),i=o("fc6a"),r=o("4d64").indexOf,c=o("d012"),a=n([].push);e.exports=function(e,t){var o,n=i(e),m=0,l=[];for(o in n)!s(c,o)&&s(n,o)&&a(l,o);while(t.length>m)s(n,o=t[m++])&&(~r(l,o)||a(l,o));return l}},cb2d:function(e,t,o){"use strict";var n=o("1626"),s=o("9bf2"),i=o("13d2"),r=o("6374");e.exports=function(e,t,o,c){c||(c={});var a=c.enumerable,m=void 0!==c.name?c.name:t;if(n(o)&&i(o,m,c),c.global)a?e[t]=o:r(t,o);else{try{c.unsafe?e[t]&&(a=!0):delete e[t]}catch(l){}a?e[t]=o:s.f(e,t,{value:o,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return e}},cc12:function(e,t,o){"use strict";var n=o("cfe9"),s=o("861d"),i=n.document,r=s(i)&&s(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},cdce:function(e,t,o){"use strict";var n=o("cfe9"),s=o("1626"),i=n.WeakMap;e.exports=s(i)&&/native code/.test(String(i))},cfe9:function(e,t,o){"use strict";(function(t){var o=function(e){return e&&e.Math===Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||o("object"==typeof this&&this)||function(){return this}()||Function("return this")()}).call(this,o("c8ba"))},d012:function(e,t,o){"use strict";e.exports={}},d039:function(e,t,o){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,o){"use strict";var n=o("cfe9"),s=o("1626"),i=function(e){return s(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e]):n[e]&&n[e][t]}},d1e7:function(e,t,o){"use strict";var n={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!n.call({1:2},1);t.f=i?function(e){var t=s(this,e);return!!t&&t.enumerable}:n},d9b5:function(e,t,o){"use strict";var n=o("d066"),s=o("1626"),i=o("3a9b"),r=o("fdbf"),c=Object;e.exports=r?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return s(t)&&i(t.prototype,c(e))}},dc4a:function(e,t,o){"use strict";var n=o("59ed"),s=o("7234");e.exports=function(e,t){var o=e[t];return s(o)?void 0:n(o)}},dd54:function(e){e.exports=JSON.parse('["😀","😃","😄","😁","😆","😅","😂","🤣","😇","😉","😊","🙂","🙃","😋","😌","😍","🥳","😘","😗","😚","🤪","😜","😎","😓","👌","👋","👍","👎"]')},df75:function(e,t,o){"use strict";var n=o("ca84"),s=o("7839");e.exports=Object.keys||function(e){return n(e,s)}},e163:function(e,t,o){"use strict";var n=o("1a2d"),s=o("1626"),i=o("7b0b"),r=o("f772"),c=o("e177"),a=r("IE_PROTO"),m=Object,l=m.prototype;e.exports=c?m.getPrototypeOf:function(e){var t=i(e);if(n(t,a))return t[a];var o=t.constructor;return s(o)&&t instanceof o?o.prototype:t instanceof m?l:null}},e177:function(e,t,o){"use strict";var n=o("d039");e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e330:function(e,t,o){"use strict";var n=o("40d5"),s=Function.prototype,i=s.call,r=n&&s.bind.bind(i,i);e.exports=n?r:function(e){return function(){return i.apply(e,arguments)}}},e893:function(e,t,o){"use strict";var n=o("1a2d"),s=o("56ef"),i=o("06cf"),r=o("9bf2");e.exports=function(e,t,o){for(var c=s(t),a=r.f,m=i.f,l=0;l<c.length;l++){var u=c[l];n(e,u)||o&&n(o,u)||a(e,u,m(t,u))}}},e8b5:function(e,t,o){"use strict";var n=o("c6b6");e.exports=Array.isArray||function(e){return"Array"===n(e)}},e9f5:function(e,t,o){"use strict";var n=o("23e7"),s=o("cfe9"),i=o("19aa"),r=o("825a"),c=o("1626"),a=o("e163"),m=o("edd0"),l=o("8418"),u=o("d039"),d=o("1a2d"),p=o("b622"),f=o("ae93").IteratorPrototype,h=o("83ab"),b=o("c430"),v="constructor",g="Iterator",y=p("toStringTag"),j=TypeError,O=s[g],w=b||!c(O)||O.prototype!==f||!u((function(){O({})})),x=function(){if(i(this,f),a(this)===f)throw new j("Abstract class Iterator not directly constructable")},E=function(e,t){h?m(f,e,{configurable:!0,get:function(){return t},set:function(t){if(r(this),this===f)throw new j("You can't redefine this property");d(this,e)?this[e]=t:l(this,e,t)}}):f[e]=t};d(f,y)||E(y,g),!w&&d(f,v)&&f[v]!==Object||E(v,x),x.prototype=f,n({global:!0,constructor:!0,forced:w},{Iterator:x})},edd0:function(e,t,o){"use strict";var n=o("13d2"),s=o("9bf2");e.exports=function(e,t,o){return o.get&&n(o.get,t,{getter:!0}),o.set&&n(o.set,t,{setter:!0}),s.f(e,t,o)}},f772:function(e,t,o){"use strict";var n=o("5692"),s=o("90e3"),i=n("keys");e.exports=function(e){return i[e]||(i[e]=s(e))}},f7fe:function(e,t,o){(function(t){var o="Expected a function",n=NaN,s="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,a=/^0o[0-7]+$/i,m=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),p=Object.prototype,f=p.toString,h=Math.max,b=Math.min,v=function(){return d.Date.now()};function g(e,t,n){var s,i,r,c,a,m,l=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(o);function f(t){var o=s,n=i;return s=i=void 0,l=t,c=e.apply(n,o),c}function g(e){return l=e,a=setTimeout(x,t),u?f(e):c}function j(e){var o=e-m,n=e-l,s=t-o;return d?b(s,r-n):s}function O(e){var o=e-m,n=e-l;return void 0===m||o>=t||o<0||d&&n>=r}function x(){var e=v();if(O(e))return E(e);a=setTimeout(x,j(e))}function E(e){return a=void 0,p&&s?f(e):(s=i=void 0,c)}function k(){void 0!==a&&clearTimeout(a),l=0,s=m=i=a=void 0}function S(){return void 0===a?c:E(v())}function C(){var e=v(),o=O(e);if(s=arguments,i=this,m=e,o){if(void 0===a)return g(m);if(d)return a=setTimeout(x,t),f(m)}return void 0===a&&(a=setTimeout(x,t)),c}return t=w(t)||0,y(n)&&(u=!!n.leading,d="maxWait"in n,r=d?h(w(n.maxWait)||0,t):r,p="trailing"in n?!!n.trailing:p),C.cancel=k,C.flush=S,C}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function j(e){return!!e&&"object"==typeof e}function O(e){return"symbol"==typeof e||j(e)&&f.call(e)==s}function w(e){if("number"==typeof e)return e;if(O(e))return n;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var o=c.test(e);return o||a.test(e)?m(e.slice(2),o?2:8):r.test(e)?n:+e}e.exports=g}).call(this,o("c8ba"))},f99f:function(e,t,o){"use strict";var n=o("cfe9");e.exports=function(e,t){var o=n.Iterator,s=o&&o.prototype,i=s&&s[e],r=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){r=!0}},-1)}catch(c){c instanceof t||(r=!1)}if(!r)return i}},fb15:function(e,t,o){"use strict";if(o.r(t),"undefined"!==typeof window){var n=window.document.currentScript,s=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(o.p=s[1])}var i=o("8bbf");const r={class:"comments__emoji-list"},c=["onClick"],a={class:"comments__panel-form-add"};function m(e,t,o,n,s,m){const l=Object(i["resolveComponent"])("comments-svg-icons"),u=Object(i["resolveComponent"])("comments-form"),d=Object(i["resolveComponent"])("comments-item");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["comments",{"comments--lock":e.isScrollDocument,[e.optionsInit.yourCssClass]:e.optionsInit.yourCssClass}]),"data-vue-comments":""},[Object(i["createVNode"])(l),Object(i["createVNode"])(i["Transition"],{name:"fade"},{default:Object(i["withCtx"])(()=>[e.emojiList.isShow?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:"comments__emoji",onMouseleave:t[0]||(t[0]=t=>e.toggleEmojiList(null,t,!1)),"data-vue-comments-emoji-list":"",style:Object(i["normalizeStyle"])({top:e.emojiList.top+"px",left:e.emojiList.left+"px"})},[Object(i["createElementVNode"])("div",r,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.optionsInit.emojiLilst,(t,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{class:"comments__emoji-list-item",onClick:o=>e.addEmoji(t),key:o},Object(i["toDisplayString"])(t),9,c))),128))])],36)):Object(i["createCommentVNode"])("",!0)]),_:1}),Object(i["createElementVNode"])("div",a,[e.optionsInit.formAddShowAlways||e.optionsInit.user.auth?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0})):Object(i["createCommentVNode"])("",!0)]),e.mapItems[e.optionsInit.parentIdStart]?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:Object(i["normalizeClass"])(["comments__list",{"comments__list--scroll":e.isHorizontalScroll}]),ref:"list",onMousedown:t[1]||(t[1]=t=>e.setMousedownCord(t)),onMousemove:t[2]||(t[2]=t=>e.setHorizontalScroll(t)),onMouseleave:t[3]||(t[3]=t=>e.setMousedownCord(t))},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.mapItems[e.optionsInit.parentIdStart].items,(t,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"comments__item",key:t},[Object(i["createVNode"])(d,{comment:e.comments[t],comments:e.comments,mapItems:e.mapItems,widthResizeWindow:e.widthResizeWindow},null,8,["comment","comments","mapItems","widthResizeWindow"])]))),128))],34)):Object(i["createCommentVNode"])("",!0)],2)}o("14d9"),o("e9f5"),o("ab43");const l={class:"comments-item__row-comment"},u={class:"comments-item__col-avatar"},d=["src"],p={key:0,class:"comments-item__content"},f={key:0,class:"comments-item__error-text"},h={class:"comments-item__panel-top"},b={class:"comments-item__user-name","data-comments-item-user-name":""},v={key:0,class:"comments-item__answer-to"},g={key:0,class:"comments-spiner"},y={class:"comments-item__file-gallery-box-img"},j=["href"],O=["src","alt"],w=["href"],x={key:1,class:"comments-item__file-gallery-count"},E={class:"comments-item__text-box"},k=["innerHTML"],S={key:1,class:"comments-item__date-update"},C={key:1,class:"comments-item__panel-bottom"},I={class:"comments-item__panel-bottom-col comments-item__panel-bottom-col--1"},N={class:"comments-item__date-create"},V={class:"comments-item__panel-bottom-col comments-item__panel-bottom-col--2"},_={key:0,class:"comments-spiner"},B={key:1,class:"comments-item__vote"},T={key:0,class:"comments-spiner"},L={class:"comments-item__vote-item"},D={class:"comments-item__vote-count"},M={class:"comments-item__vote-item"},F={class:"comments-item__vote-count"},z={key:2,class:"comments-item__row-btn-more"},A={key:0,class:"comments-spiner"},q={class:"comments-item__panel-form-add"},R={key:3,class:"comments-item__panel-bottom comments-item__panel-bottom--edited"},P={class:"comments-item__panel-bottom-col comments-item__panel-bottom-col--1"},H={class:"comments-item__date-create"},U={class:"comments-item__panel-bottom-col comments-item__panel-bottom-col--2"},Y={key:0,class:"comments-item__row-answer"};function J(e,t,o,n,s,r){const c=Object(i["resolveComponent"])("comments-form"),a=Object(i["resolveComponent"])("comments-item",!0);return e.isShow?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:Object(i["normalizeClass"])(["comments-item",{"comments-item--delete":e.mapItems[e.comment.id].isDelete}])},[Object(i["createElementVNode"])("div",l,[Object(i["createElementVNode"])("div",u,[Object(i["createElementVNode"])("img",{class:"comments-item__avatar-img",src:e.comment.userImg||e.options.imgDefaultUser,loading:"lazy"},null,8,d)]),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["comments-item__col-content",{"comments-item__col-content--form-show":e.isFormShow}])},[e.isEdited?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",p,[e.error?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",f,Object(i["toDisplayString"])(e.error),1)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",h,[Object(i["createElementVNode"])("div",b,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.comment.userName),1),e.userNameAnswer?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",v,[t[17]||(t[17]=Object(i["createElementVNode"])("svg",{class:"comments-item__answer-to-icon"},[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-share"})],-1)),Object(i["createElementVNode"])("span",{class:"comments-item__answer-to-user",onClick:t[0]||(t[0]=t=>e.scrollToComment(e.comment.parentId))},"@"+Object(i["toDisplayString"])(e.userNameAnswer),1)])):Object(i["createCommentVNode"])("",!0)]),e.comment.isManageEdit||e.comment.isManageDelete?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:"comments-item__btn-settings",onClick:t[5]||(t[5]=t=>e.toggleSettings())},[t[23]||(t[23]=Object(i["createElementVNode"])("svg",{class:"comments-item__btn-settings-icon"},[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-settings"})],-1)),e.isShowSettings?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:"comments-item__settings",onMouseleave:t[4]||(t[4]=t=>e.toggleSettings())},[e.isDeleteSending?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",g,t[18]||(t[18]=[Object(i["createElementVNode"])("div",{class:"comments-spiner__element"},null,-1)]))):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",{class:"comments-item__settings-closed",onMouseup:t[1]||(t[1]=t=>e.toggleSettings())},t[19]||(t[19]=[Object(i["createElementVNode"])("svg",null,[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-closed"})],-1)]),32),e.comment.isManageEdit?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:1,class:"comments-item__settings-item",onClick:t[2]||(t[2]=t=>(e.toggleSettings(),e.toggleEdited(!0),e.toggleForm(!0)))},[t[20]||(t[20]=Object(i["createElementVNode"])("svg",{class:"comments-item__settings-icon"},[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-edit"})],-1)),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.options.translation.settingsEdit),1)])):Object(i["createCommentVNode"])("",!0),t[22]||(t[22]=Object(i["createElementVNode"])("br",null,null,-1)),e.comment.isManageDelete?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:2,class:"comments-item__settings-item",onClick:t[3]||(t[3]=t=>e.deleteMessage(e.comment))},[t[21]||(t[21]=Object(i["createElementVNode"])("svg",{class:"comments-item__settings-icon"},[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-delete"})],-1)),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.options.translation.settingsDelete),1)])):Object(i["createCommentVNode"])("",!0)],32)):Object(i["createCommentVNode"])("",!0)])):Object(i["createCommentVNode"])("",!0)]),e.files.length?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:1,class:Object(i["normalizeClass"])(["comments-item__file-gallery",{active:e.isOpenGallery}])},[e.isOpenGallery?(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{key:0,class:"comments-item__file-gallery-closed",onClick:t[6]||(t[6]=t=>e.toggleGallery(!1))},t[24]||(t[24]=[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-closed"},null,-1)]))):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",y,["icon"===e.files[e.slideNum].type?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:0,download:"",href:e.files[e.slideNum].src,class:Object(i["normalizeClass"])("comments-item__file-gallery-icon")},t[25]||(t[25]=[Object(i["createElementVNode"])("svg",null,[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-download"})],-1)]),8,j)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",{key:1,class:Object(i["normalizeClass"])(["comments-item__file-gallery","comments-item__file-gallery-img"]),loading:"lazy",onClick:t[7]||(t[7]=t=>e.toggleGallery(!0)),src:e.isOpenGallery?e.files[e.slideNum].src:e.files[e.slideNum].preview,alt:e.files[e.slideNum].name},null,8,O)),e.files.length>1?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:2,class:"comments-item__file-gallery-arrow comments-item__file-gallery-arrow--prev",onClick:t[8]||(t[8]=t=>e.leafSlide(-1))},t[26]||(t[26]=[Object(i["createElementVNode"])("svg",null,[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-arrow-left"})],-1)]))):Object(i["createCommentVNode"])("",!0),e.files.length>1?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:3,class:"comments-item__file-gallery-arrow comments-item__file-gallery-arrow--next",onClick:t[9]||(t[9]=t=>e.leafSlide(1))},t[27]||(t[27]=[Object(i["createElementVNode"])("svg",null,[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-arrow-right"})],-1)]))):Object(i["createCommentVNode"])("",!0),"icon"===e.files[e.slideNum].type?(Object(i["openBlock"])(),Object(i["createElementBlock"])("a",{key:4,class:"comments-item__file-gallery-download",download:"download",href:e.files[e.slideNum].src},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.options.translation.btnFileDownload),1),t[28]||(t[28]=Object(i["createElementVNode"])("br",null,null,-1)),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.files[e.slideNum].name),1)],8,w)):Object(i["createCommentVNode"])("",!0)]),e.files.length>1?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",x,[Object(i["createElementVNode"])("b",null,Object(i["toDisplayString"])(e.slideNum+1),1),t[29]||(t[29]=Object(i["createTextVNode"])(" из ")),Object(i["createElementVNode"])("b",null,Object(i["toDisplayString"])(e.files.length),1)])):Object(i["createCommentVNode"])("",!0)],2)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",E,[Object(i["createElementVNode"])("div",{class:"comments-item__text",style:Object(i["normalizeStyle"])(e.isTextBriefЕxpand?{"line-clamp":e.options.text.briefMaxLine}:{}),innerHTML:e.isTextBriefЕxpand?e.text.brief:e.text.all,ref:"text"},null,12,k),e.isTextBrief?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:0,class:"comments-item__text-more",onClick:t[10]||(t[10]=t=>e.toggleTextBrief(e.comment.text))},Object(i["toDisplayString"])(e.isTextBriefЕxpand?e.options.translation.btnЕxpand:e.options.translation.btnCollapse),1)):Object(i["createCommentVNode"])("",!0),e.comment.dateUpdate?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",S,[Object(i["createElementVNode"])("b",null,Object(i["toDisplayString"])(e.options.translation.dateEditedText),1),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.formatDate(e.comment.dateUpdate)),1)])):Object(i["createCommentVNode"])("",!0)])])),e.isEdited?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",C,[Object(i["createElementVNode"])("div",I,[e.options.btnAnswerShowAlways||e.options.user.auth?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:"comments-item__btn-ansfer",onClick:t[11]||(t[11]=t=>e.toggleForm())},Object(i["toDisplayString"])(e.options.translation.btnAnswer),1)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",N,Object(i["toDisplayString"])(e.formatDate(e.comment.dateCreate)),1)]),Object(i["createElementVNode"])("div",V,[e.mapItems[e.comment.id].quantity&&(0==e.mapItems[e.comment.id].items.length||0==e.options.list.secondShowStart&&!e.mapItems[e.comment.id].qShowNext)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{key:0,class:"comments-item__btn-more comments-item__btn-more--answers",onClick:t[12]||(t[12]=t=>e.showComments({parentId:e.comment.id,insertTo:"after"}))},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.options.translation.btnMoreAnswers),1),e.mapItems[e.comment.id].isProcessing?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",_,t[30]||(t[30]=[Object(i["createElementVNode"])("div",{class:"comments-spiner__element"},null,-1)]))):Object(i["createCommentVNode"])("",!0)])):Object(i["createCommentVNode"])("",!0),e.options.isShowVote?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",B,[e.isVoteSending?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",T,t[31]||(t[31]=[Object(i["createElementVNode"])("div",{class:"comments-spiner__element"},null,-1)]))):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",L,[(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{class:Object(i["normalizeClass"])(["comments-item__vote-btn",{active:1==e.comment.voteValue}]),onClick:t[13]||(t[13]=t=>e.sendVote(1,e.comment))},t[32]||(t[32]=[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-like"},null,-1)]),2)),Object(i["createElementVNode"])("div",D,Object(i["toDisplayString"])(e.comment.like||""),1)]),Object(i["createElementVNode"])("div",M,[(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{class:Object(i["normalizeClass"])(["comments-item__vote-btn",{active:-1==e.comment.voteValue}]),onClick:t[14]||(t[14]=t=>e.sendVote(-1,e.comment))},t[33]||(t[33]=[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-dislike"},null,-1)]),2)),Object(i["createElementVNode"])("div",F,Object(i["toDisplayString"])(e.comment.dislike||""),1)])])):Object(i["createCommentVNode"])("",!0)])])),e.mapItems[e.comment.parentId].btnMoreNext==e.comment.id&&e.mapItems[e.comment.parentId].qShowBalance>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",z,[Object(i["createElementVNode"])("button",{class:"comments-item__btn-more",onClick:t[15]||(t[15]=t=>e.showComments({parentId:e.comment.parentId,insertTo:"after"}))},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.options.translation.btnMore)+" ("+Object(i["toDisplayString"])(e.mapItems[e.comment.parentId].qShowBalance)+")",1),e.mapItems[e.comment.parentId].isProcessing?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",A,t[34]||(t[34]=[Object(i["createElementVNode"])("div",{class:"comments-spiner__element"},null,-1)]))):Object(i["createCommentVNode"])("",!0)])])):Object(i["createCommentVNode"])("",!0),Object(i["withDirectives"])(Object(i["createElementVNode"])("div",q,[Object(i["createVNode"])(c,{comment:e.comment,userNameAnswer:e.comment.userName,isEdited:e.isEdited},null,8,["comment","userNameAnswer","isEdited"])],512),[[i["vShow"],e.isFormShow]]),e.isEdited?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",R,[Object(i["createElementVNode"])("div",P,[Object(i["createElementVNode"])("div",H,Object(i["toDisplayString"])(e.formatDate(e.comment.dateCreate)),1)]),Object(i["createElementVNode"])("div",U,[Object(i["createElementVNode"])("div",{class:"comments-item__btn-cancel-editing",onClick:t[16]||(t[16]=t=>e.cancelEditing())},Object(i["toDisplayString"])(e.options.translation.btnСancelEditing),1)])])):Object(i["createCommentVNode"])("",!0)],2)]),e.mapItems[e.comment.id]?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Y,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.mapItems[e.comment.id].items,t=>(Object(i["openBlock"])(),Object(i["createBlock"])(a,{userNameAnswer:e.comment.userName,comments:e.comments,mapItems:e.mapItems,widthResizeWindow:e.widthResizeWindow,comment:e.comments[t],key:t},null,8,["userNameAnswer","comments","mapItems","widthResizeWindow","comment"]))),128))])):Object(i["createCommentVNode"])("",!0)],2)):Object(i["createCommentVNode"])("",!0)}const G={class:"comments-form"},Q={key:0,class:"comments-form__col-avatar"},W=["src"],X={key:0,class:"comments-spiner"},K={class:"comments-form__textarea-content"},Z={key:0,class:"comments-form__answer-to"},$={class:"comments-form__answer-to-text"},ee={class:"comments-form__answer-to-user-name"},te={key:1,class:"comments-form__textarea-error-text"},oe={key:2,class:"comments-form__file-list"},ne=["onClick","title"],se=["onClick"],ie={class:"comments-form__file-preview"},re=["src","alt"],ce={key:0,class:"comments-form__file-preview-text"},ae=["placeholder"],me={class:"comments-form__textarea-panel"},le=["accept"],ue={key:0,class:"comments-form__message-file-params"},de={class:"comments-form__col-btn-send"};function pe(e,t,o,n,s,r){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",G,[e.isEdited?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Q,[Object(i["createElementVNode"])("img",{class:"comments-form__avatar-img",src:e.options.user.img},null,8,W)])),Object(i["createElementVNode"])("div",{class:"comments-form__col-textarea",onClick:t[8]||(t[8]=t=>e.checkAuth(t,"form"))},[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["comments-form__textarea",[{"comments-form__textarea-error":e.error}]])},[e.isFormSending?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",X,t[10]||(t[10]=[Object(i["createElementVNode"])("div",{class:"comments-spiner__element"},null,-1)]))):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",K,[!e.isEdited&&e.userNameAnswer?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Z,[Object(i["createElementVNode"])("span",$,Object(i["toDisplayString"])(e.options.translation.formAnswerTo),1),Object(i["createElementVNode"])("span",ee,"@"+Object(i["toDisplayString"])(e.userNameAnswer),1)])):Object(i["createCommentVNode"])("",!0),e.error?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",te,Object(i["toDisplayString"])(e.error),1)):Object(i["createCommentVNode"])("",!0),e.files.length?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",oe,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.files,(t,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["comments-form__file-item",t.isDelete?"comments-form__file-item--delete":""]),key:o},[Object(i["createElementVNode"])("span",{class:"comments-form__file-btn-delete",onClick:t=>e.deleteFile(o),title:e.options.translation.fileDelete},null,8,ne),t.isDelete?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:0,class:"comments-form__file-btn-restore",onClick:t=>e.restoreFile(o)},Object(i["toDisplayString"])(e.options.translation.fileRestore),9,se)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",ie,[Object(i["createElementVNode"])("img",{class:Object(i["normalizeClass"])(["comments-form__file-preview","comments-form__file-preview"+(e.options.imgExtensions[t.extension]?"-img":"-icon")]),src:e.options.imgExtensions[t.extension]?t.src:e.iconFile,alt:t.name},null,10,re),e.options.imgExtensions[t.extension]?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ce,Object(i["toDisplayString"])(t.name),1))])],2))),128))])):Object(i["createCommentVNode"])("",!0),Object(i["withDirectives"])(Object(i["createElementVNode"])("textarea",{class:"comments-form__message",onInput:t[0]||(t[0]=t=>e.getPosCursor()),onClick:t[1]||(t[1]=t=>e.getPosCursor()),placeholder:e.options.translation.formPlaceholder,ref:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.text=t)},null,40,ae),[[i["vModelText"],e.text]])]),Object(i["createElementVNode"])("div",me,[e.options.isShowBtnUpload?(Object(i["openBlock"])(),Object(i["createElementBlock"])("label",{key:0,class:"comments-form__textarea-panel-upload-file",onClick:t[3]||(t[3]=t=>e.createFilePreview(t,e.$refs.files.files)),onChange:t[4]||(t[4]=t=>e.createFilePreview(t,e.$refs.files.files))},[t[11]||(t[11]=Object(i["createElementVNode"])("svg",{class:"comments-form__textarea-panel-icon"},[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-image"})],-1)),Object(i["createElementVNode"])("input",{class:"comments-form__textarea-panel-upload-file-input",type:"file",ref:"files",accept:e.options.validExtensions.str,multiple:"multiple"},null,8,le)],32)):Object(i["createCommentVNode"])("",!0),e.options.isShowBtnEmoji?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:1,class:"comments-form__textarea-panel-emoji-box","data-vue-comments-form-emoji-btn":"",onTouchend:t[5]||(t[5]=t=>e.toggleEmojiList(this,t)),onMouseenter:t[6]||(t[6]=t=>e.toggleEmojiList(this,t,!0)),onMouseleave:t[7]||(t[7]=t=>e.toggleEmojiList(null,t,!1))},t[12]||(t[12]=[Object(i["createElementVNode"])("svg",{class:"comments-form__textarea-panel-icon"},[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-smile"})],-1)]),32)):Object(i["createCommentVNode"])("",!0)])],2),e.options.translation.messageFileParams?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ue,Object(i["toDisplayString"])(e.options.translation.messageFileParams),1)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",de,[(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{class:"comments-form__btn-send",onClick:t[9]||(t[9]=t=>e.sendComment(t))},t[13]||(t[13]=[Object(i["createElementVNode"])("use",{"xlink:href":"#vue-comments-symbol-icon-send"},null,-1)])))])])}var fe=o("0928"),he=o.n(fe),be={name:"CommentsForm",inject:["options","preparationRequestData","addCommentToList","editCommentToList","emitMessage","toggleForm","toggleEmojiList","addEmoji"],props:{comment:{type:Object,default(){return{}}},isEdited:{type:Boolean,default:!1},userNameAnswer:{type:String,default:""}},data(){return{text:"",files:[],iconFile:he.a,accept:"",error:"",isFormSending:!1,posCursor:0}},watch:{isEdited:{immediate:!0,handler(){this.isEdited?(this.files=this.createFileList(this.comment.files),this.text=this.comment.text):this.clearForm(),this.error=""}}},methods:{createFilePreview(e,t){this.checkAuth(e,"form-btn-upload"),this.error="";let{validExtensions:o,fileMaxSize:n,translation:s}=this.options;for(let i of t){let e=this.getExtension(i.name);if(o.str&&!o.items[e]){this.error=s.errorFileExtension;continue}if(i.size>n){this.error=s.errorFileSize;continue}let t={file:i,src:null,extension:e,name:i.name,isDelete:!1};if(this.options.imgExtensions[e]){let e=new FileReader;e.readAsDataURL(i),e.onload=()=>{t.src=e.result,this.files.push(t)},e.onerror=()=>{this.files.push(t)}}else this.files.push(t)}},createFileList(e){let t=[];for(let o of e)t.push({src:o.src,extension:this.getExtension(o.src),name:o.name,isDelete:!1});return t},getExtension(e){return e.match(/[^.]+$/i)[0]},deleteFile(e){this.files[e].isDelete=!0},restoreFile(e){this.files[e].isDelete=!1},checkAuth(e,t){this.options.user.auth||(e.preventDefault(),this.emitMessage({type:"user-no-auth",component:this,sourceType:t}))},sendComment(e){this.checkAuth(e,"form-send");let{user:t,filesMaxCount:o,translation:n,text:s}=this.options,i=this.text.trim(),r=!1,c=0;if(this.files.length)for(let a of this.files)a.isDelete||(c++,r=!0);c>o?this.error=n.errorFileMaxCount:i.length<s.minLength||i.length>s.maxLength?this.error=n.errorTextLength:(r||i)&&t.auth&&(this.isFormSending=!0,this.error="",this.isEdited?this.editComment(i):this.addComment(i))},addComment(e){let{url:t,params:o,send:n,typeData:s}=this.options.dataApi.commentAdd,i=[];if(this.files.length)for(let c of this.files)c.isDelete||i.push(c.file);let r=this.preparationRequestData({data:{text:e,parentId:this.comment.id||0,files:i},url:t,params:o,typeData:s});n({url:r.url,params:r.params}).then(e=>{try{let t=this.options.parentIdStart==e.parentId?"before":"after";e.userName=e.userName||this.options.user.name,this.clearForm(),this.addCommentToList(e,t),this.toggleForm&&this.toggleForm()}catch(t){this.error=this.options.translation.errorUnexpected,console.error(t)}}).catch(e=>{this.error=this.options.translation.errorFormSend||e,console.error(e)}).finally(()=>{this.emitMessage({type:"comment-add",component:this,sourceType:"form",error:this.error}),this.isFormSending=!1})},editComment(e){let{url:t,params:o,send:n,typeData:s}=this.options.dataApi.commentEdit,i=[],r=[];if(this.files.length)for(let a of this.files)a.file&&!a.isDelete&&i.push(a.file),a.file||r.push(a);let c=this.preparationRequestData({data:{text:e,commentId:this.comment.id,uploadedFiles:JSON.stringify(r),files:i},url:t,params:o,typeData:s});n({url:c.url,params:c.params}).then(e=>{try{this.editCommentToList(e),this.clearForm(),this.toggleForm&&this.toggleForm()}catch(t){this.error=this.options.translation.errorUnexpected,console.error(t)}}).catch(e=>{this.error=this.options.translation.errorFormSend||e,console.error(e)}).finally(()=>{this.emitMessage({type:"comment-edit",component:this,sourceType:"form",error:this.error}),this.isFormSending=!1})},clearForm(){this.text="",this.files=[],this.$refs.files&&(this.$refs.files.value="",this.$refs.text.style.height="auto")},getPosCursor(){this.posCursor=this.$refs.text.selectionEnd}}},ve=be,ge=(o("7f0b"),o("6b0d")),ye=o.n(ge);const je=ye()(ve,[["render",pe]]);var Oe=je,we=o("44dc"),xe=o.n(we),Ee={name:"CommentsItem",components:{CommentsForm:Oe,CommentsItem:Ce},inject:["options","emitMessage","addCommentVote","preparationRequestData","deleteCommentToList","showComments","setMapItemLinkComponent","scrollToComment"],provide(){return{toggleForm:this.toggleForm}},watch:{widthResizeWindow:{handler(){this.checkIsShowBntTextMore()}},isShow:{handler(){this.$nextTick(()=>{this.checkIsShowBntTextMore()})}}},computed:{isShow(){return this.mapItems[this.comment.parentId].show[this.comment.id]}},props:{comments:{type:Object,default(){return{}}},comment:{type:Object,default(){return{}}},mapItems:{type:Object,default(){return{}}},userNameAnswer:{type:String,default:""},widthResizeWindow:{type:Number,default:0}},data(){return{text:{brief:"",all:""},isTextBrief:!1,"isTextBriefЕxpand":!0,isFormShow:!1,iconFile:he.a,files:[],slideNum:0,isOpenGallery:!1,listLinks:{},listeners:{},isVoteSending:!1,isDeleteSending:!1,isEdited:!1,isShowSettings:!1,error:""}},created(){this.init()},mounted(){this.setMapItemLinkComponent(this.comment.id,this),this.checkIsShowBntTextMore()},methods:{init(){this.preparationDataFiles();let{text:e}=this.comment,{briefMaxLength:t}=this.options.text;this.preparationText(e,t,xe.a)},preparationDataFiles(){this.files=[];for(let e of this.comment.files){let t,o=e.preview.split("?");t=o.length>1?o[o.length-2].match(/[^.]+$/i)[0]:e.preview.match(/[^.]+$/i)[0];let n={...e,extension:t};this.options.imgExtensions[t]?n.type="img":n.type="icon",n.src=e.src,this.files.push(n)}},preparationText(e,t,o){let n=this.createTextListLinks(e,o.link),s=this.checkTextBriefMaxLength(e,t),i=this.cropText(e,t);return this.isTextBrief=s,this.text.all=this.convertTxtToHtml(e,n,o.link),this.text.brief=this.convertTxtToHtml(i,n,o.link),{text:{all:this.text.all,brief:this.text.brief},isTextBrief:this.isTextBrief}},checkTextBriefMaxLength(e,t){return"none"!==t&&e.length>t},checkTextBriefMaxLine(e,t,o){return"none"!==e&&t>o},checkIsShowBntTextMore(){let e,{briefMaxLength:t,briefMaxLine:o}=this.options.text,{text:n}=this.comment,s=this.checkTextBriefMaxLength(n,t);if(this.$refs.text){let{scrollHeight:t,clientHeight:n}=this.$refs.text;e=this.checkTextBriefMaxLine(o,t,n)}return this.isTextBrief=s||e,this.isTextBrief},createTextListLinks(e,t){let o=0,n={};return e.replace(t,e=>{o++,n[o]=e}),{count:o,items:n}},convertTxtToHtml(e,t,o){let n=0;return t.count&&(e=e.replace(o,e=>(n++,`<a href="${t.items[n]}" target="_blank">${e}</a>`))),e.replace(/\n/g,"<br/>")},cropText(e,t){return""===e||"none"===t||e.length<=t||e.length<=t?e:e.slice(0,t)+"..."},toggleTextBrief(){this.isTextBriefЕxpand=!this.isTextBriefЕxpand},calculateVoteCount(e,t){let o,n,s,i;return t=+t,o=1==t,n=-1==t,!e.voteValue&&t?(s=o?e.like+1:e.like,i=n?e.dislike+1:e.dislike):1==e.voteValue?(s=e.like-1,i=n?e.dislike+1:e.dislike):-1==e.voteValue&&(s=o?e.like+1:e.like,i=e.dislike-1),{like:s,dislike:i,voteValue:t}},sendVote(e,t){if(this.isVoteSending)return;this.error="";let o="btn-vote";if(this.options.user.auth){this.isVoteSending=!0;let{url:n,params:s,send:i,typeData:r}=this.options.dataApi.vote,c=this.preparationRequestData({data:{commentId:t.id,voteValue:e},url:n,params:s,typeData:r});i({url:c.url,params:c.params}).then(({voteValue:e})=>{try{let o=this.calculateVoteCount(t,e);Object.assign(o,{parentId:t.parentId,id:t.id}),t=this.addCommentVote(o)}catch(o){this.error=this.options.translation.errorUnexpected,console.error(o)}}).catch(e=>{this.error=this.options.translation.errorVoteSend,console.error(e)}).finally(()=>{this.emitMessage({type:"vote",component:this,sourceType:o,"сurentItem":t,error:this.error}),this.isVoteSending=!1})}else this.emitMessage({type:"user-no-auth",component:this,sourceType:o,"сurentItem":t})},deleteMessage(e){if(!e.isManageDelete&&this.isDeleteSending)return;this.isDeleteSending=!0,this.error="";let{url:t,params:o,send:n,typeData:s}=this.options.dataApi.commentDelete,i=this.preparationRequestData({data:{commentId:e.id},url:t,params:o,typeData:s});n({url:i.url,params:i.params}).then(()=>{this.toggleSettings();try{this.deleteCommentToList({commentId:e.id,parentId:e.parentId})}catch(t){this.error=this.options.translation.errorUnexpected,console.error(t)}}).catch(e=>{this.error=this.options.translation.errorFormSend||e,console.error(e)}).finally(()=>{this.emitMessage({type:"comment-delete",component:this,sourceType:"form","сurentItem":e,error:this.error}),this.isDeleteSending=!1})},leafSlide(e){1===e&&(this.files.length-1>this.slideNum?this.slideNum=this.slideNum+1:this.slideNum=0),-1===e&&(this.slideNum-1>=0?this.slideNum=this.slideNum-1:this.slideNum=this.files.length-1)},toggleGallery(e=!this.isOpenGallery){this.isOpenGallery=e,this.toggleScroll(e)},toggleScroll(e){let t="auto";e&&(t="hidden"),document.querySelector("body").style.overflow=t},formatDate(e){let{translation:t}=this.options,o=1e3*e;const n=864e5;let s=new Date(o),i=Date.now(),r=s.getYear(),c=s.getMonth()+1,a=s.getDate(),m=s.getHours(),l=s.getMinutes(),u=new Date(i).getHours(),d=`${("0"+m).slice(-2)}:${("0"+l).slice(-2)}`,p=`${("0"+a).slice(-2)}.${("0"+c).slice(-2)}.${("0"+r).slice(-2)}`;return i-o<n?u>=m?`${t.dateToday} ${d}`:`${t.dateYesterday} ${d}`:i-o<2*n&&u>=m?`${t.dateYesterday} ${d}`:p},toggleSettings(e=!this.isShowSettings){this.isShowSettings=e},toggleEdited(e=!this.isEdited){this.isEdited=e,this.$nextTick(()=>{this.checkIsShowBntTextMore()})},toggleForm(e=!this.isFormShow){this.options.user.auth?(this.isFormShow=e,e||(this.toggleSettings(!1),this.isEdited&&this.init(),this.toggleEdited(!1))):this.emitMessage({type:"user-no-auth",component:this,sourceType:"btn-toggle-form"})},cancelEditing(){this.toggleForm()}}},ke=Ee;o("59ad");const Se=ye()(ke,[["render",J]]);var Ce=Se;const Ie={xmlns:"http://www.w3.org/2000/svg"};function Ne(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",Ie,t[0]||(t[0]=[Object(i["createStaticVNode"])('<symbol id="vue-comments-symbol-icon-image" viewBox="0 0 512 512"><path fill="inherit" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"></path></symbol><symbol id="vue-comments-symbol-icon-send" viewBox="0 0 512 512"><path fill="inherit" d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"></path></symbol><symbol id="vue-comments-symbol-icon-smile" viewBox="0 0 496 512"><path fill="inherit" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z"></path></symbol><symbol id="vue-comments-symbol-icon-arrow-left" viewBox="0 0 320 512"><path fill="inherit" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></symbol><symbol id="vue-comments-symbol-icon-arrow-right" viewBox="0 0 320 512"><path fill="inherit" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></symbol><symbol id="vue-comments-symbol-icon-file" viewBox="0 0 384 512"><path fill="inherit" d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"></path></symbol><symbol id="vue-comments-symbol-icon-closed" viewBox="0 0 352 512"><path fill="inherit" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></symbol><symbol id="vue-comments-symbol-icon-download" viewBox="0 0 512 512"><path fill="inherit" d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"></path></symbol><symbol id="vue-comments-symbol-icon-dislike" viewBox="0 0 512 512"><path fill="inherit" d="M0 56v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56zm40 200c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24zm272 256c-20.183 0-29.485-39.293-33.931-57.795-5.206-21.666-10.589-44.07-25.393-58.902-32.469-32.524-49.503-73.967-89.117-113.111a11.98 11.98 0 0 1-3.558-8.521V59.901c0-6.541 5.243-11.878 11.783-11.998 15.831-.29 36.694-9.079 52.651-16.178C256.189 17.598 295.709.017 343.995 0h2.844c42.777 0 93.363.413 113.774 29.737 8.392 12.057 10.446 27.034 6.148 44.632 16.312 17.053 25.063 48.863 16.382 74.757 17.544 23.432 19.143 56.132 9.308 79.469l.11.11c11.893 11.949 19.523 31.259 19.439 49.197-.156 30.352-26.157 58.098-59.553 58.098H350.723C358.03 364.34 384 388.132 384 430.548 384 504 336 512 312 512z"></path></symbol><symbol id="vue-comments-symbol-icon-like" viewBox="0 0 512 512"><path fill="inherit" d="M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"></path></symbol><symbol id="vue-comments-symbol-icon-settings" viewBox="0 0 512 512"><path fill="inherit" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></symbol><symbol id="vue-comments-symbol-icon-edit" viewBox="0 0 512 512"><path fill="inherit" d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"></path></symbol><symbol id="vue-comments-symbol-icon-delete" viewBox="0 0 448 512"><path fill="inherit" d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"></path></symbol><symbol id="vue-comments-symbol-icon-share" viewBox="0 0 512 512"><path fill="inherit" d="M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"></path></symbol>',14)]))}const Ve={},_e=ye()(Ve,[["render",Ne]]);var Be=_e,Te=o("8d00"),Le=o.n(Te),De=o("a5f4"),Me=o("dd54"),Fe=o("2d30"),ze=o.n(Fe),Ae=o("f7fe"),qe=o.n(Ae),Re={name:"Comments",components:{CommentsItem:Ce,CommentsForm:Oe,CommentsSvgIcons:Be},provide(){return{addCommentToList:this.addCommentToList,editCommentToList:this.editCommentToList,deleteCommentToList:this.deleteCommentToList,preparationRequestData:this.preparationRequestData,emitMessage:this.emitMessage,addCommentVote:this.addCommentVote,options:this.optionsInit,createListCommentsShow:this.createListCommentsShow,showComments:this.showComments,setMapItemLinkComponent:this.setMapItemLinkComponent,scrollToComment:this.scrollToComment,toggleEmojiList:this.toggleEmojiList,addEmoji:this.addEmoji}},props:{commentsData:{type:Object,default(){return{}}},options:{type:Object,default(){return{}}}},data(){return{emojiList:{isShow:!1,top:0,left:0},widthResizeWindow:0,isTouchmovieDocument:!1,isScrollDocument:!1,contextCommentsForm:null,mousedownCord:{pageX:0,pageY:0},isHorizontalScroll:!1,optionsInit:{yourCssClass:"",parentIdStart:0,filesMaxCount:1/0,fileMaxSize:2097152,validExtensions:{default:["jpg","png","jpeg","jpeg","gif","svg","wbpp"],items:{},str:""},imgExtensions:De,emojiLilst:Me,isScrollToComment:!0,isShowVote:!0,isShowBtnUpload:!0,isShowBtnEmoji:!0,text:{minLength:0,maxLength:1e3,briefMaxLength:150,briefMaxLine:4},list:{mainShowStart:5,secondShowStart:1,mainShow:5,secondShow:3},translation:{btnAnswer:"Answer","btnЕxpand":"More",btnCollapse:"Collapse",btnFileDownload:"Download",formPlaceholder:"Add a comment",fileDelete:"Delete",fileRestore:"Restore",dateToday:"Today",dateYesterday:"Yesterday",settingsDelete:"Delete",settingsEdit:"Edit",dateEditedText:"Edited:","btnСancelEditing":"Сancel editing",btnMore:"Show more",btnMoreAnswers:"Show answers",formAnswerTo:"Answer to",messageFileParams:"Maximum file size 2 Mb, supported extentions: jpg, png, jpeg, jpeg, gif, svg, wbpp",errorVoteSend:"Error sending vote",errorFormSend:"Error form send",errorUnexpected:"Unexpected error",errorGetComments:"Error get comments",errorFileExtension:"Error file extension",errorFileSize:"Error file size",errorFileMaxCount:"Error file limit exceeded",errorTextLength:"The length of the text must be between 0 and 1000 characters"},dataApi:{vote:{send:({url:e,params:t})=>fetch(e,t).then(e=>e.ok?e.json():e.json().then(e=>{throw null===e||void 0===e?void 0:e.error})),url:"/",params:{method:"POST"},typeData:""},commentsListGet:{send:({url:e,params:t})=>fetch(e,t).then(e=>e.ok?e.json():e.json().then(e=>{throw null===e||void 0===e?void 0:e.error})),url:"/",params:{method:"GET"},typeData:"query"},commentAdd:{send:({url:e,params:t})=>fetch(e,t).then(e=>e.ok?e.json():e.json().then(e=>{throw null===e||void 0===e?void 0:e.error})),url:"/",params:{method:"POST"},typeData:""},commentEdit:{send:({url:e,params:t})=>fetch(e,t).then(e=>e.ok?e.json():e.json().then(e=>{throw null===e||void 0===e?void 0:e.error})),url:"/",params:{method:"PUT"},typeData:""},commentDelete:{send:({url:e,params:t})=>fetch(e,t).then(e=>e.ok?e.json():e.json().then(e=>{throw null===e||void 0===e?void 0:e.error})),url:"/",params:{method:"DELETE"},typeData:""}},user:{name:"User Name",img:Le.a,auth:!1},formAddShowAlways:!0,btnAnswerShowAlways:!0,imgDefaultUser:Le.a,deleteCommentBefore:()=>new Promise((e,t)=>{e()}),deleteCommentAfter:()=>new Promise((e,t)=>{e()})},comments:{},mapItems:{},listeners:{},newCommentsIds:{}}},mounted(){this.listeners["touchstart"]=e=>{e.target.closest("[data-vue-comments-form-emoji-btn]")||e.target.closest("[data-vue-comments-emoji-list]")||(this.emojiList.isShow=!1)},this.listeners["touchend"]=()=>{ze()()&&(this.isScrollDocument=!1,this.isTouchmovieDocument=!1)},this.listeners["touchcancel"]=()=>{ze()()&&(this.isScrollDocument=!1,this.isTouchmovieDocument=!1)},this.listeners["touchmove"]=e=>{this.isTouchmovieDocument=!0},this.listeners["scroll"]=e=>{ze()()&&this.isTouchmovieDocument&&(this.isScrollDocument=!0),this.toggleEmojiList(null,e,!1)},this.listeners["resize"]=qe()(()=>{this.widthResizeWindow=window.innerWidth},500),document.addEventListener("touchstart",this.listeners["touchstart"]),document.addEventListener("touchend",this.listeners["touchend"]),document.addEventListener("touchcancel",this.listeners["touchcancel"]),document.addEventListener("touchmove",this.listeners["touchmove"]),document.addEventListener("scroll",this.listeners["scroll"]),window.addEventListener("resize",this.listeners["resize"]),document.addEventListener("mouseup",this.setMousedownCord)},beforeUnmount(){document.removeEventListener("touchstart",this.listeners["touchstart"]),document.removeEventListener("touchend",this.listeners["touchcancel"]),document.removeEventListener("touchcancel",this.listeners["touchcancel"]),document.removeEventListener("touchmove",this.listeners["touchmove"]),document.removeEventListener("scroll",this.listeners["scroll"]),window.removeEventListener("resize",this.listeners["resize"]),document.removeEventListener("mouseup",this.setMousedownCord)},watch:{options:{deep:!0,immediate:!0,handler(){this.initOptions(this.options)}},commentsData:{immediate:!0,handler(){this.initData(this.commentsData)}}},methods:{initData(e){let{items:t={},mapItems:o={}}=e;this.comments={...t},o[this.optionsInit.parentIdStart]||(o[this.optionsInit.parentIdStart]={quantity:0,items:[]}),this.setMapItems(o,"after")},initOptions(e){let t=()=>{let{validExtensions:t}=e,o={};t=t||this.optionsInit.validExtensions.default;for(let e of t)o[e]=e;return{items:o,str:t.length?"."+t.join(",."):""}},o=(e,t)=>{for(let n in t){let s=t[n];"object"!==typeof s||null===s||Array.isArray(s)?void 0!==t[n]&&(e[n]=t[n]):o(e[n],t[n])}};o(this.optionsInit,e),e.user&&(!e.user.auth||e.user.auth&&!e.user.img)&&(this.optionsInit.user.img=this.optionsInit.imgDefaultUser),Object.assign(this.optionsInit.validExtensions,t())},setMapItems(e,t,o=!1){let n=!1;for(let s in e){if(s in this.mapItems||(n=!0,this.mapItems[s]={isProcessing:!1,quantity:e[s].quantity,items:[],btnMoreNext:null,qShowBalance:0,qShowNext:0,show:{},delete:[],isDelete:!1}),o){let t=[];for(let o of e[s].items)this.mapItems[o]||t.push(o);e[s].items=t}if(e[s].quantity&&(this.mapItems[s].quantity=e[s].quantity),"before"==t)this.mapItems[s].items=[...e[s].items,...this.mapItems[s].items],this.setMapItemsBefore({quantityShow:e[s].items.length,parentId:s});else if("after"==t){this.mapItems[s].items=[...this.mapItems[s].items,...e[s].items];let t=this.calcItemsShow({isNewList:n,parentId:s});this.setMapItemsAfter({quantityShow:t,parentId:s})}}},setMapItemsAfter({quantityShow:e,parentId:t}){let o=this.mapItems[t].btnMoreNext;for(let n=e.current;e.next>n;n++){let e=this.mapItems[this.mapItems[t].items[n]];this.mapItems[t].show[this.mapItems[t].items[n]]=!0,e&&e.isNew||(o=this.mapItems[t].items[n])}this.mapItems[t].btnMoreNext=o,this.mapItems[t].qShowNext=e.next,this.mapItems[t].qShowBalance=this.mapItems[t].quantity-e.next},setMapItemsBefore({quantityShow:e,parentId:t}){for(let o=0;e>o;o++){let e=this.mapItems[t].items[o];this.mapItems[t].show[e]=!0}this.mapItems[t].qShowNext=this.mapItems[t].qShowNext+e,this.mapItems[t].qShowBalance=this.mapItems[t].quantity-this.mapItems[t].qShowNext},setMapItemLinkComponent(e,t){this.mapItems[e].component=t},calcItemsShow({isNewList:e=!1,parentId:t}){let o,{qShowNext:n}=this.mapItems[t],{mainShowStart:s,secondShowStart:i,mainShow:r,secondShow:c}=this.optionsInit.list;if(e){let e=this.optionsInit.parentIdStart==t?s:i;o=this.mapItems[t].quantity>=e?e:e-(e-this.mapItems[t].quantity)}else{let e=this.optionsInit.parentIdStart==t?r:c,s=n+e;o=this.mapItems[t].quantity>=s?s:s-(s-this.mapItems[t].quantity)}return this.mapItems[t].items.length||(n=0,o=0),{current:n,next:o}},async getComments({parentId:e,firstId:t,lastId:o,insertTo:n}){let{url:s,params:i,send:r,typeData:c}=this.optionsInit.dataApi.commentsListGet,a=this.preparationRequestData({data:{parentId:e,firstId:t,lastId:o,insertTo:n,newCommentsIds:this.newCommentsIds[e]?this.newCommentsIds[e].join(","):""},url:s,params:i,typeData:c}),m=await r({url:a.url,params:a.params});return m},async showComments({parentId:e,insertTo:t}){let o=this.mapItems[e],n=o.items.length,s=0,i=0,r=[];if(o.isProcessing)return;o.isProcessing=!0;let c=this.calcItemsShow({isNewList:!o,parentId:e,mapItems:this.mapItems});if(c.next>n||0==n&&o.quantity>0){if(n>0){s=o.items[0];for(let e=n-1;e>0;e--){let t=o.items[e];if(!this.mapItems[t].isNew&&!i){i=t;break}r.push(t)}}let{mapItems:c,items:m}=await this.getComments({firstId:s,lastId:i,parentId:e,insertTo:t});try{c[e].quantity=c[e].quantity+this.mapItems[e].delete.length,this.setMapItems(c,t,!0),this.addCommentsListToList(m)}catch(a){this.error=this.optionsInit.translation.errorGetComments,console.error(a)}}else this.setMapItemsAfter({quantityShow:c,parentId:e});this.emitMessage({type:"comments-show",component:this,sourceType:"btn-more","сurentItem":o,error:this.error}),o.isProcessing=!1},addCommentsListToList(e){Object.assign(this.comments,e)},addCommentToList(e,t){this.setMapItems({[e.id]:{items:[],quantity:0}},t),this.mapItems[e.id].isNew=!0;let o={[e.parentId]:{items:[e.id],quantity:this.mapItems[e.parentId].quantity+1}};return this.setMapItems(o,t),Object.assign(this.comments,{[e.id]:e}),this.mapItems[e.parentId].show[e.id]=!0,"after"==t&&this.optionsInit.isScrollToComment&&this.$nextTick(()=>{this.scrollToComment(e.id)}),this.newCommentsIds[e.parentId]||(this.newCommentsIds[e.parentId]=[]),this.newCommentsIds[e.parentId].push(e.id),e},editCommentToList(e){return Object.assign(this.comments[e.id],e),this.comments[e.id]},async deleteCommentToList({commentId:e,parentId:t}){await this.optionsInit.deleteCommentBefore(),this.mapItems[e].isDelete=!0,this.mapItems[t].delete.push(e),await this.optionsInit.deleteCommentAfter()},scrollToComment(e){let t=this.mapItems[e].component.$el;t&&t.scrollIntoView({behavior:"smooth"})},addCommentVote(e){return Object.assign(this.comments[e.id],e),this.comments[e.id]},preparationRequestData({data:e={},url:t,params:o={},typeData:n}){switch(n){case"json":o.body=JSON.stringify(e);break;case"query":{let o=Object.keys(e).map(t=>t+"="+e[t]).join("&");t=`${t}${t.indexOf("?")+1?"&":"?"}${o}`}break;default:{let t=new FormData;for(let o in e)if("files"===o)for(let n of e[o])t.append("file",n);else t.append(o,e[o]);o.body=t;break}}return{params:o,url:t}},emitMessage({type:e="",sourceType:t="",component:o=null,"сurentItem":n=null,error:s=null}){this.$emit("message-comment",{"сurentItem":n,items:this.comments,mapItems:this.mapItems,component:o,error:s,type:e,sourceType:t})},toggleEmojiList(e,t,o=!this.emojiList.isShow){if(t.target===document)return this.contextCommentsForm=null,void(this.emojiList.isShow=!1);let{top:n,left:s}=t.target.getBoundingClientRect();if(ze()())switch(t.type){case"touchend":this.contextCommentsForm=e,this.emojiList.isShow=o;break}else switch(t.type){case"mouseleave":t.toElement.closest("[data-vue-comments-form-emoji-btn]")||t.toElement.closest("[data-vue-comments-emoji-list]")||(this.contextCommentsForm=e,this.emojiList.isShow=o);break;case"mouseenter":this.contextCommentsForm=e,this.emojiList.isShow=o;break}this.emojiList.top=n+34,this.emojiList.left=s-146},addEmoji(e){let{text:t,posCursor:o}=this.contextCommentsForm;this.contextCommentsForm.text=t.slice(0,o)+e+t.slice(o,t.length),this.contextCommentsForm.posCursor=o+e.length},setMousedownCord(e){if(!ze()())switch(this.isHorizontalScroll=!1,e.type){case"mousedown":this.mousedownCord={pageX:e.pageX,pageY:e.pageY};break;default:this.mousedownCord={pageX:0,pageY:0};break}},setHorizontalScroll(e){let{pageX:t}=this.mousedownCord,{scrollWidth:o,clientWidth:n,scrollLeft:s}=this.$refs.list,i=e.pageX-t,r=o-n;o>n&&t&&!ze()()&&(this.isHorizontalScroll=!0,i<0?i=e.pageX-t<r?e.pageX-t:r:i>0&&(i=Math.abs(e.pageX-t)<s?e.pageX-t:0),this.$refs.list.scrollTo({left:Math.abs(i)}))}}},Pe=Re;o("113c");const He=ye()(Pe,[["render",m]]);var Ue=He,Ye=Ue;t["default"]=Ye},fc6a:function(e,t,o){"use strict";var n=o("44ad"),s=o("1d80");e.exports=function(e){return n(s(e))}},fdbf:function(e,t,o){"use strict";var n=o("04f8");e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})}));
//# sourceMappingURL=vue-comments.umd.min.js.map